<?xml version="1.0" encoding="utf-8" ?>
<gameroom inherit="Default" name="Sarad DnDAL">
	<!--Favorite Rolls-->
	<roll>
		<formula>@X ← (if #1 = "Basic" then d20 elif #1 = "Advantage" then 2d20H1 else 2d20L1 end). @X ← (if #2 = 0 then @X else (@X + Wd4) end). @DEXCHECK(("Initiative",@X))
		</formula>
		<name>Initiative</name>
		<parameter style="enum" name="Roll" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter style="bool" name="Guidance"/>
	</roll>
	<roll>
		<formula>@X ← (if #1 = "Basic" then d20 elif #1 = "Advantage" then 2d20H1 else 2d20L1 end). @X ← (if #2 = 0 then @X else (@X + Wd4) end). @STRCHECK(("Shield Bash",@X))
		</formula>
		<name>Shield Bash</name>
		<parameter style="enum" name="Roll" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter style="bool" name="Guidance"/>
	</roll>
	<roll>
		<formula>@X ← (if #1 = "Basic" then d20 elif #1 = "Advantage" then 2d20H1 elif #1 = "CritHit" then 20 elif #1 = "CritMiss" then 1 else 2d20L1 end). if @X = 1 then @CRITICAL((@X)) elif @X = 20 then <!--Weapon Damage--> @WDMG ← (if #2 = "Axe" then (2d8 + @STR) elif #2 = "Longsword" then (2d8 + @STR + @SWORDBONUS) <!--Longbow--> else (2d8 + @DEX) end). @FDMG ← (if #3 = 1 ∧ #2 = "Axe" then 6Od6 elif #3 = 0 ∧ #2 = "Axe" then 4Od6 elif #3 = 1 ∧ #2 = "Longsword" then 2Od6 else 0 end). @CRITICAL((@X)) + @ATKDMG((#2,@WDMG,@FDMG)) else @X ← (if #4 = 0 then @X else (@X + Wd4) end). <!--Weapon Damage--> @WDMG ← (if #2 = "Axe" then (d8 + @STR) elif #2 = "Longsword" then (d8 + @STR + @SWORDBONUS) <!--Longbow--> else (d8 + @DEX) end). @FDMG ← (if #3 = 1 ∧ #2 = "Axe" then 3Od6 elif #3 = 0 ∧ #2 = "Axe" then 2Od6 elif #3 = 1 ∧ #2 = "Longsword" then Od6 else 0 end). @ATKROLL((#2,@X)) + @ATKDMG((#2,@WDMG,@FDMG)) end	
		</formula>
		<name>Weapon Attacks</name>
		<parameter name="Roll" style="enum" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter name="Weapon" style="enum" default="Axe" enums="Axe,Longsword,Longbow"/>
		<parameter style="bool" default="1" name="Helm of Brilliance"/>
		<parameter style="bool" name="Bless"/>
	</roll>
	<roll>
		<formula>@X ← (if #1 = "Basic" then d20 elif #1 = "Advantage" then 2d20H1 else 2d20L1 end). if @X = 1 then @CRITICAL((@X)) elif @X = 20 then <!--Weapon Damage--> @WDMG ← (if #2 = "Axe" then (2d8 + 2d10 + @STR) else (2d8 + 2d10 + @STR + @SWORDBONUS) end). <!--Fire Damage --> @FDMG ← (if #3 = 1 ∧ #2 = "Axe" then 6Od6 elif #3 = 0 ∧ #2 = "Axe" then 4Od6 elif #3 = 1 ∧ #2 = "Longsword" then 2Od6 else 0 end). @CRITICAL((@X)) + @ATKDMG((#2,@WDMG,@FDMG)) else @X ← (if #4 = 0 then @X else (@X + Wd4) end). <!--Weapon Damage--> @WDMG ← (if #2 = "Axe" then (d8 + d10 + @STR) else (d8 + d10 + @STR + @SWORDBONUS) end). @FDMG ← (if #3 = 1 ∧ #2 = "Axe" then 3Od6 elif #3 = 0 ∧ #2 = "Axe" then 2Od6 elif #3 = 1 ∧ #2 = "Longsword" then Od6 else 0 end). @ATKROLL((#2,@X)) + @ATKDMG((#2,@WDMG,@FDMG)) end	
		</formula>
		<name>Riposte</name>
		<parameter name="Roll" style="enum" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter name="Weapon" style="enum" default="Axe" enums="Axe,Longsword"/>
		<parameter style="bool" default="1" name="Helm of Brilliance"/>
		<parameter style="bool" name="Bless"/>
	</roll>
	<roll>
		<formula>"Slashing:" + (if #1 = 1 then 2d10 else d10 end) + "DC:" + (8 + @STR + @PROF)
		</formula>
		<name>Superiority Die</name>
		<parameter style="bool" name="Crit" default="1"/>
	</roll>
	<roll>
		<formula>if #1 = "Undead" then "Radiant:" + Yd6 if #1 = "Prismatic Spray" then (@X ← d8. (if @X = 1 then "(Red) Fire:" + 10Rd6 elif @X = 2 then "(Orange) Acid:" + 10Od6 elif @X = 3 then "(Yellow) Lightning:" + 10Yd6 elif @X = 4 then "(Green) Poison:" + 10Gd6 elif @X = 5 then "(Blue) Cold:" + 10Bd6 elif @X = 6 then "(Indigo) Restrained!" elif @X = 7 then "(Violet) Blinded!" else "Target struck by 2 rays!" end) + "DEX Save DC: 18 Half") else "Fire:" + (if #1 = "Fireball" then 8Od6 else 5Od8 end) + "DEX Save DC: 18 Half"
		</formula>
		<name>Helm of Brilliance</name>
		<parameter name="Spell" style="enum" default="Undead" enums="Undead,Fireball,Prismatic Spray,Wall of Fire"/>
		<parameter style="bool" name="Bless"/>
	</roll>
	<roll>
		<formula>"HP Healed:" + (d10 + @FIGHTERLVL)
		</formula>
		<name>Second Wind</name>
	</roll>
	<roll>
		<formula>@X ← (if #2 = "Basic" then d20 elif #2 = "Advantage" then 2d20H1 else 2d20L1 end). @X ← (if #3 = 0 then @X else (@X + Wd4) end). if #1 = "Athletics" then @STRCHECK((#1,@X)) elif #1 = "Acrobatics" ∨ #1 = "Sleight of Hand" ∨ #1 = "Stealth" ∨ #1 = "Thieves Tools" then @DEXCHECK((#1,@X)) elif #1 = "Arcana" ∨ #1 = "History" ∨ #1 = "Investigation" ∨ #1 ="Nature" ∨ #1 = "Religion" then @INTCHECK((#1,@X)) elif #1 = "Animal Handling" ∨ #1 = "Insight" ∨ #1 = "Medicine" ∨ #1 ="Perception" ∨ #1 = "Survival" then @WISCHECK((#1,@X)) else @CHACHECK((#1,@X)) end
		</formula>
		<name>Skills</name>
		<parameter style="enum" name="Skills" default="Acrobatics" enums="Acrobatics,Animal Handling,Arcana,Athletics,Deception,History,Insight,Intimidation,Investigation,Medicine,Nature,Perception,Performance,Persuasion,Religion,Sleight of Hand,Stealth,Survival,Thieves Tools"/>
		<parameter style="enum" name="Roll" default="Basic" enums="Basic,Advantage,Disadvantage"/>	
		<parameter style="bool" name="Guidance"/>
	</roll>
	<roll>
		<formula>@X ← (if #2 = "Basic" then d20 elif #2 = "Advantage" then 2d20H1 else 2d20L1 end). @X ← (if #3 = 0 then @X else (@X + Wd4) end). if #1 = "STR Save" then @STRCHECK((#1,@X)) elif #1 = "DEX Save" then @DEXCHECK((#1,@X)) elif #1 = "CON Save" then @CONCHECK((#1,@X)) elif #1 = "INT Save" then @INTCHECK((#1,@X)) elif #1 = "WIS Save" then @WISCHECK((#1,@X)) else @CHACHECK((#1,@X)) end
		</formula>
		<name>Saving Throws</name>
		<parameter style="enum" name="Stat" default="STR Save" enums="STR Save,DEX Save,CON Save,INT Save,WIS Save,CHA Save"/>
		<parameter style="enum" name="Roll" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter style="bool" name="Bless"/>
	</roll>
	<roll>
		<formula>@X ← (if #2 = "Basic" then d20 elif #2 = "Advantage" then 2d20H1 else 2d20L1 end). @X ← (if #3 = 0 then @X else (@X + Wd4) end). if #1 = "STR Check" then @STRCHECK((#1,@X)) elif #2 = "DEX Check" then @DEXCHECK((#1,@X)) elif #1 = "CON Check" then @CONCHECK((#1,@X)) elif #1 = "INT Check" then @INTCHECK((#1,@X)) elif #1 = "WIS Check" then @WISCHECK((#1,@X)) else @CHACHECK((#1,@X)) end
		</formula>
		<name>Ability Checks</name>
		<parameter style="enum" name="Stat" default="STR Check" enums="STR Check,DEX Check,CON Check,INT Check,WIS Check,CHA Check"/>
		<parameter style="enum" name="Roll" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter style="bool" name="Guidance"/>
	</roll>
	<roll>
		<formula>@X ← (if #1 = "Basic" then d20 elif #1 = "Advantage" then 2d20H1 else 2d20L1 end). @X ← (if #3 = 0 then @X else (@X + Wd4) end). @X
		</formula>
		<name>d20 Roll</name>
		<parameter style="enum" name="Roll" default="Basic" enums="Basic,Advantage,Disadvantage"/>
		<parameter style="bool" name="Guidance"/>
	</roll>
	<!--User Globals-->
	<variable kind="number" name="CHA">0</variable>
	<variable kind="number" name="CLOAKBONUS">1</variable>
	<variable kind="number" name="CON">3</variable>
	<variable kind="number" name="DEX">1</variable>
	<variable kind="number" name="FIGHTERLVL">17</variable>
	<variable kind="number" name="INT">-1</variable>
	<variable kind="number" name="LVL">17</variable>
	<variable kind="number" name="PROF">5</variable>
	<variable kind="number" name="SHLDBONUS">3</variable>
	<variable kind="number" name="STR">5</variable>
	<variable kind="number" name="SWORDBONUS">2</variable>
	<variable kind="number" name="WIS">2</variable>
	<!--User Functions-->
	<!--Damage Rolls--> 
	<!--#1 = Weapon Type, #2 = Weapon Damage, #3 = Fire Damage -->
	<function name="ATKDMG">
		(if #1 = "Longbow" then "Piercing:" else "Slashing:" end) + (if #3 = 0 then #2 else #2 + "Fire:" + #3 + "Total:" + (#2 + #3) end)</function>
	<!--#1 = Weapon Type, #2 = Attack Roll-->
	<function name="ATKROLL">"ATK:" + (if #1 = "Axe" then (#2 + @STR + @PROF) elif #1 = "Longsword" then (#2 + @STR + @PROF + @SWORDBONUS) else (#2 + @DEX + @PROF) end)</function>
	<!--#1 = Roll-->
	<function name="CRITICAL">if #1 = 1 then "Critical Miss!" + "\$Swoosh$" else "Crit!" + "\$Clang$" end</function>
	<!--Ability Checks-->
	<!--#1 = Ability, #2 = Roll-->
	<function name="STRCHECK">#1 + ":" + (if #1 = "Athletics" ∨ #1 = "Shield Bash" then (#2 + @STR + @PROF) elif #1 = "STR Save" then (#2 + @STR + @PROF + @CLOAKBONUS) else (#2 + @STR) end)</function>
	<function name="DEXCHECK">#1 + ":" + (if #1 = "DEX Save" then (#2 + @DEX + @SHLDBONUS + @CLOAKBONUS + @PROF) else (#2 + @DEX) end)</function>
	<function name="CONCHECK">#1 + ":" + (if #1 = "CON Save" then (#2 + @CON + @PROF + @CLOAKBONUS) else (#2 + @CON) end)</function>
	<function name="INTCHECK">#1 + ":" + (if #1 = "Arcana" ∨ #1 = "Investigation" then (#2 + @INT + @PROF) elif #1 = "INT Save" then (#2 + @INT + @CLOAKBONUS) else (#2 + @INT) end)</function>
	<function name="WISCHECK">#1 + ":" + (if #1 = "Perception" then (#2 + @WIS + @PROF) elif #1 = "WIS Save" then (#2 + @WIS + @CLOAKBONUS + @PROF) else (#2 + @WIS) end) </function>
	<function name="CHACHECK">#1 + ":" + (if #1 = "CHA Save" then (#2 + @CHA + @CLOAKBONUS) else (#2 + @CHA) end)</function>
	<!--Current Effects-->
	<dicebar title="(Bar)">
		<die>D20</die>
		<die>D12</die>
		<die>D10</die>
		<die>D8</die>
		<die>D6</die>
		<die>D4</die>
		<die>D%</die>
	</dicebar>
	<!--Props-->
</gameroom>